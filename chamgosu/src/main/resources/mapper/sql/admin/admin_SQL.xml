<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 
<mapper namespace="admin">
	<insert id="insertAdministrator" parameterType="hashmap">
		INSERT INTO chamgosu.CG_USER(
			US_USERID,
			US_LOGINID,
			US_LOGINPASS,
			US_NAME,
			US_TELNO1,
			US_TELNO2,
			US_EMAIL,
			US_LEV,
			US_MASTER,
			US_MEMO,
			REGDATE
		)VALUES(
			(SELECT chamgosu.makeUserId()),
			#{US_LOGINID},
			#{US_LOGINPASS},
			#{US_NAME},
			#{US_TELNO1},
			#{US_TELNO2},
			#{US_EMAIL},
			#{US_LEV},
			#{US_MASTER},
			#{US_MEMO},
			CURDATE()
		)
	</insert>
	<select id="selectAdministrator" parameterType="hashmap" resultType="hashmap">
		SELECT * FROM(SELECT
			@rnum := @rnum + 1 AS rownum,
			US_USERID,
			US_LOGINID,
			US_LOGINPASS,
			US_NAME,
			US_TELNO1,
			US_TELNO2,
			US_EMAIL,
			US_LEV,
			US_MASTER,
			US_MEMO,
			REGDATE
		FROM
			(SELECT @rnum := 0) r,
			chamgosu.CG_USER) result
		WHERE rownum BETWEEN #{start} AND #{end}
		AND US_MASTER = 'T'
	</select>
	<select id="selectAdministratorCnt" parameterType="hashmap" resultType="int">
		SELECT 
			COUNT(*)
		FROM
			chamgosu.CG_USER
		WHERE
			US_MASTER = 'T'
	</select>
</mapper>